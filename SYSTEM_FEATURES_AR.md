# توثيق ميزات نظام ERP Market المتكامل

يقدم هذا الملف تحليلاً مفصلاً ودقيقاً لكافة ميزات النظام، بدءاً من نقاط البيع والمبيعات، مروراً بالمشتريات، وصولاً إلى النظام المحاسبي المتطور، مع شرح آلية عمل كل جزء تقنياً ووظيفياً.

---

## 1. نظام المبيعات ونقاط البيع (Sales & POS)

يعتبر هذا الموديل واجهة التعامل المباشرة مع العملاء، وقد تم تصميمه ليكون سريعاً وفعالاً.

### أ. نقطة البيع (POS System)
هي الشاشة الرئيسية للكاشير، وتتميز بالخصائص التالية:
*   **دعم الباركود الذكي (Smart Barcode Scanning):**
    *   يدعم النظام أجهزة الماسح الضوئي (Scanner) بشكل تلقائي.
    *   يحتوي على نظام "Throttling" ذكي لمنع التكرار الخاطئ عند المسح السريع.
    *   إمكانية البحث اليدوي عن المنتجات عبر (الاسم، الكود، أو الباركود).
*   **سلة المبيعات الفورية:**
    *   إضافة المنتجات بسرعة مع إظهار الكمية المتاحة في المخزون.
    *   تعديل الكميات أو حذف الأصناف بسهولة.
    *   حساب تلقائي للإجمالية والضريبة (Tax) بناءً على إعدادات المتجر.
*   **إدارة العملاء في الـ POS:**
    *   اختيار "عميل نقدي" (Walk-in Customer) كافتراضي لتسريع العمليات.
    *   إمكانية البحث عن عميل مسجل واختياره لربط الفاتورة به (مفيد للذمم والولاء).
*   **عملية الدفع (Checkout):**
    *   دعم طرق دفع متعددة: نقداً (Cash)، بطاقة (Card)، تحويل بنكي (Bank Transfer).
    *   حساب المتبقي (Change) تلقائياً عند إدخال المبلغ المدفوع.
    *   تطبيق الخصومات (Discount) كقيمة ثابتة.
*   **الطباعة والفواتير:**
    *   دعم الطباعة الحرارية للفواتير (Thermal Printing).
    *   خيار "الطباعة التلقائية" بعد إتمام البيع لتوفير الوقت.

### ب. إدارة الفواتير والمبيعات (Invoices & Sales History)
*   **سجل المبيعات:** عرض كافة عمليات البيع السابقة مع حالة الدفع والتسليم.
*   **تفاصيل الفاتورة:** إمكانية الدخول لأي فاتورة سابقة وعرض تفاصيلها الدقيقة (الأصناف، الأسعار، العميل).
*   **الفوترة:** إنشاء فواتير مبيعات رسمية للشركات (B2B) تختلف عن فواتير الكاشير السريعة.

---

## 2. نظام المشتريات (Purchases Module)

مصمم لإدارة دورة التوريد بالكامل ومتابعة حسابات الموردين.

### أ. أوامر الشراء (Purchase Orders)
*   **واجهة إدخال ديناميكية:**
    *   اختيار المورد من القائمة المنسدلة.
    *   تحديد تاريخ الفاتورة ورقم مرجع المورد (Reference No).
    *   **جدول الأصناف:** إضافة منتجات متعددة في نفس الفاتورة، مع تحديد الكمية وسعر التكلفة (Cost) لكل صنف بشكل مستقل.
    *   حساب تلقائي لإجمالي الفاتورة أثناء الإدخال.
*   **حفظ وترحيل:** عند حفظ فاتورة الشراء، يقوم النظام (في الخلفية) بـ:
    1.  زيادة مخزون الأصناف المشتراة.
    2.  إنشاء قيد محاسبي (من ح/ المخزون إلى ح/ الموردين أو البنك).

### ب. إدارة الموردين (Suppliers)
*   قاعدة بيانات شاملة للموردين تشمل بيانات الاتصال والأرصدة.
*   متابعة كشف حساب المورد (через التقارير المحاسبية).

---

## 3. النظام المحاسبي والمالي (Accounting & Finance)

هذا هو "القلب" المالي للنظام، وقد تم بناؤه وفق معايير المحاسبة الدولية (Double-Entry Bookkeeping).

### أ. شجرة الحسابات (Chart of Accounts - COA)
*   هيكل شجري مرن يضم الحسابات الرئيسية: الأصول (Assets)، الخصوم (Liabilities)، حقوق الملكية (Equity)، الإيرادات (Revenue)، والمصروفات (Expenses).
*   إمكانية إضافة حسابات فرعية غير محدودة.

### ب. قيود اليومية (Journal Entries)
*   **القيود الآلية:** النظام ينشئ قيوداً تلقائية عند حدوث عمليات بيع أو شراء (مثال: عند البيع -> مدين: الصندوق / دائن: المبيعات).
*   **القيود اليدوية:** واجهة لإنشاء قيود يومية معقدة ومتوازنة يدوياً لتسوية الحسابات.

### ج. سندات القبض والصرف (Vouchers)
*   **سند القبض (Receipt Voucher):**
    *   واجهة مبسطة للمحاسب لاستلام الأموال.
    *   يقوم النظام بتحويل المدخلات البسيطة (استلمنا من "العميل س" مبلغ "1000" في "البنك") إلى قيد مزدوج محاسبي صحيح (Debit: Bank, Credit: Account Receivable).
*   **سند الصرف (Payment Voucher):**
    *   تسجيل المدفوعات للموردين أو المصاريف النثرية بنفس الآلية الدقيقة.

### د. التقارير المالية الختامية (Financial Reports)
*   **ميزان المراجعة (Trial Balance):** للتحقق من توازن الحسابات.
*   **قائمة الدخل (Income Statement / P&L):** لحساب صافي الربح أو الخسارة خلال فترة.
*   **الميزانية العمومية (Balance Sheet):** توضح المركز المالي للمنشأة (ما لها وما عليها).
*   **كشف التدفقات النقدية (Cash Flow):** (ميزة جديدة) لمتابعة حركة السيولة الداخلة والخارجة.
*   **دفتر الأستاذ العام (General Ledger):** كشف حساب تفصيلي لأي حساب في الشجرة.

---

## 4. ميزات تقنية وعامة للنظام

*   **تعدد اللغات (i18n):**
    *   دعم كامل للغة العربية (RTL) والإنجليزية (LTR).
    *   تغيير اللغة يتم فورياً دون الحاجة لإعادة تحميل الصفحة بالكامل.
*   **نظام الصلاحيات والأدوار (RBAC):**
    *   **Admin:** صلاحيات كاملة.
    *   **Manager:** إدارة العمليات دون صلاحيات حذف حساسة.
    *   **Accountant:** وصول مخصص للتقارير والقيود والسندات فقط.
    *   **Cashier:** وصول محدود لنقطة البيع فقط.
    *   **Storekeeper:** وصول للمخزون والمنتجات.
*   **الأداء والسرعة (Performance):**
    *   استخدام تقنية **Lazy Loading** لتحميل الصفحات فقط عند الحاجة إليها، مما يجعل النظام خفيفاً جداً وسريع الاستجابة.
*   **المتجر الإلكتروني (Online Store):**
    *   واجهة منفصلة للعملاء لطلب المنتجات أونلاين.
    *   تزامن فوري للمخزون بين المتجر الإلكتروني ونظام الإدارة.
    *   لوحة تحكم خاصة لإدارة طلبات الأونلاين (Online Orders).

---

### ملخص سير العمليات (Workflows)

1.  **دورة المبيعات:** العميل يطلب -> الكاشير يمسح الباركود -> الدفع -> إصدار الفاتورة -> خصم المخزون -> تسجيل الإيراد آلياً.
2.  **دورة المشتريات:** طلب مواد -> تسجيل فاتورة شراء -> زيادة المخزون -> تسجيل استحقاق المورد آلياً.
3.  **دورة المحاسبة:** تجميع كافة العمليات المالية من مبيعات ومشتريات -> ترحيلها لقيود -> إصدار القوائم المالية بضغطة زر.
